{"mappings":"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","sources":["src/js/filmoteka.js","src/js/markup-service.js"],"sourcesContent":["import {\n  fetchTrending,\n  fetchSearch,\n  getGenreList,\n} from './themoviedb-api-service';\nimport {\n  markupSearch,\n  markupTrending,\n  markupModalFilmInfo,\n} from './markup-service';\n\nconst page = 1;\nlet filmList;\nlet genreList;\n\nconst formEl = document.querySelector('.form');\nconst formText = document.querySelector('.form__text');\nconst gallery = document.querySelector('.gallery');\ngallery.addEventListener('click', onCardClick);\nformEl.addEventListener('submit', showGallerySearchQuery);\n\nconst modalFilmInfo = document.querySelector('.modal-film-info');\n\ninitGallery();\nexport { genreList };\n\nasync function initGallery() {\n  genreList = await getGenreList();\n  await showGallery();\n}\n\nasync function showGallery() {\n  const data = await fetchTrending(page);\n  filmList = data.results;\n  markupTrending(filmList, gallery);\n}\n\nfunction onCardClick(event) {\n  const filmBox = event.target.closest('.film-box');\n  if (!filmBox) return;\n  const filmBoxId = Number(filmBox.dataset.id);\n  const targetFilm = filmList.find(film => film.id === filmBoxId);\n  markupModalFilmInfo(targetFilm, modalFilmInfo);\n}\n\nasync function showGallerySearchQuery(evt) {\n  evt.preventDefault();\n  console.log(evt.target.searchQuery.value.trim());\n  const search = evt.target.searchQuery.value.trim().toLowerCase();\n  const data = await fetchSearch(search);\n  const searchQuery = data.results;\n\n  markupSearch(searchQuery, gallery);\n  if (!data.total_results) {\n    showGallery();\n    console.log(data.total_results);\n    formText.classList.remove('hidden');\n    return;\n  } else {\n    formText.classList.add('hidden');\n  }\n}\n","import { genreList } from './filmoteka';\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/w500';\n\nfunction getGenreById(genre_ids) {\n  const res = [];\n  for (const item of genre_ids) {\n    const genreObject = genreList.find(genre => genre.id === Number(item));\n\n    genreObject.name !== 'Science Fiction'\n      ? res.push(genreObject.name)\n      : res.push('Sci-Fi');\n  }\n  return res.length > 2 ? `${res[0]}, ${res[1]},  Other` : res.join(', ');\n}\n\nexport async function markupSearch(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\n//\n\nexport async function markupTrending(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\nexport async function markupModalFilmInfo(targetFilm, modalFilmInfo) {\n  const {\n    title,\n    poster_path,\n    overview,\n    genre_ids,\n    id,\n    original_title,\n    popularity,\n    vote_count,\n    vote_average,\n  } = targetFilm;\n  const genreString = getGenreById(genre_ids);\n  const markup = `<div class=\"film-info\">\n         <img  src=\"${IMAGE_URL}${poster_path}\">\n         <div class=\"film-info-wrapper\">\n           <p>${title || original_title}</p>\n           <p>Vote ${vote_average}</p>\n           <p>Votes ${vote_count}</p>\n           <p>Popularity ${popularity}</p>\n           <p>Original Title ${original_title}</p>\n           <p>Genre ${genreString}</p>\n           <p>ABOUT</p>\n           <p>${overview}</p>\n           <p>id: ${id}</p>\n           <button type=\"button\">Add to watched</button>\n           <button type=\"button\">Add to queue</button>\n         </div>\n        </div>`;\n\n  modalFilmInfo.innerHTML = markup;\n}\n"],"names":["$bpxeT","parcelRequire","$5f1da735307785a2$var$IMAGE_URL","$5f1da735307785a2$var$getGenreById","genre_ids","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step1","item","_step","value","genreObject","$0d1473df3547cfcd$export$a60e10dab2b13b4f","find","genre","id","Number","name","push","_iterator","Symbol","iterator","next","done","_loop","err","return","length","concat","join","$5f1da735307785a2$export$556e8fc4b06516e3","filmList","gallery","$5f1da735307785a2$var$_markupSearch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","markup","reduce","acc","param","poster_path","release_date","title","genreString","parseInt","innerHTML","$5f1da735307785a2$export$e3073cde6ea8798e","$5f1da735307785a2$var$_markupTrending","$5f1da735307785a2$export$5a4ebf6bfd514978","targetFilm","modalFilmInfo","$5f1da735307785a2$var$_markupModalFilmInfo","overview","original_title","popularity","vote_count","vote_average","$0d1473df3547cfcd$var$filmList","$0d1473df3547cfcd$var$formEl","document","querySelector","$0d1473df3547cfcd$var$formText","$0d1473df3547cfcd$var$gallery","addEventListener","event","filmBox","target","closest","filmBoxId","dataset","film","$0d1473df3547cfcd$var$modalFilmInfo","evt","$0d1473df3547cfcd$var$_showGallerySearchQuery","$0d1473df3547cfcd$var$_initGallery","$fvDOI","getGenreList","_ctx","sent","$0d1473df3547cfcd$var$showGallery","$0d1473df3547cfcd$var$_showGallery","data","fetchTrending","results","search","preventDefault","console","log","searchQuery","trim","toLowerCase","fetchSearch","total_results","classList","remove","add","$0d1473df3547cfcd$var$initGallery"],"version":3,"file":"index.0f7c5504.js.map"}