{"mappings":"AAgBOA,eAAeC,EAAcC,GAClC,IACE,MAAMC,EAAWC,MACf,kGAAmDF,KAErD,aAAcC,GAAUE,M,CACxB,MAAOC,GACP,OAAOC,QAAQC,IAAI,aAAcF,E,EAarC,IAAIG,EAMG,SAASC,EAAaC,GAC3B,OAAOF,EACJG,QAAOC,GAASF,EAAUG,SAASD,EAAME,MACzCC,KAAIC,GAAQA,EAAKC,OACjBC,KAAK,K,EARVnB,iBACE,MAAMoB,QAZRpB,iBACE,IACE,MAAMG,EAAWC,MAAM,0FACvB,aAAcD,GAAUE,M,CACxB,MAAOC,GACP,OAAOC,QAAQC,IAAI,aAAcF,E,EAOhBe,GACnBZ,EAAYW,EAAKE,M,CAHnBC,GCjCOvB,eAAewB,EAAeC,EAAUC,GAC7C,MAAMC,EAASF,EAASG,QACtB,CAACC,GAAKC,YAAEA,EAAWC,aAAEA,EAAYpB,UAAEA,EAASI,GAAEA,EAAEiB,MAAEA,KAExCH,EAAO,kCAAkCd,8EACFe,YAAsBE,2CACtCA,2EAHXtB,EAAaC,uEAMuBsB,SACtDF,sCAKJ,IAEFL,EAAQQ,UAAYP,C,CAGf3B,eAAemC,EAAoBC,EAAYC,GACpD,MAAML,MACJA,EAAKF,YACLA,EAAWQ,SACXA,EAAQ3B,UACRA,EAASI,GACTA,EAAEwB,eACFA,EAAcC,WACdA,EAAUC,WACVA,EAAUC,aACVA,GACEN,EAEET,EAAS,+EACiBG,gEAElBE,6BACKU,8BACCD,mCACKD,uCACID,8BART7B,EAAaC,kDAWnB2B,4BACIvB,2JAMlBsB,EAAcH,UAAYP,C,CClD5B,IAAIgB,EAEJ,MAAMC,EAAUC,SAASC,cAAc,YACvCF,EAAQG,iBAAiB,SAYzB,SAAqBC,GACnB,MAAMC,EAAUD,EAAME,OAAOC,QAAQ,aACrC,IAAKF,EAAS,OACd,MAAMG,EAAYC,OAAOJ,EAAQK,QAAQvC,IAEzCoB,EADmBQ,EAASY,MAAKC,GAAQA,EAAKzC,KAAOqC,IACrBK,E,IAflC,MAAMA,EAAgBZ,SAASC,cAAc,qBAI7C9C,iBACE,MAAMoB,QAAanB,EAXR,GAYX0C,EAAWvB,EAAKsC,QAChBlC,EAAemB,EAAUC,E,CAL3Be","sources":["src/js/themoviedb-api-service.js","src/js/markup-service.js","src/js/filmoteka.js"],"sourcesContent":["/**\n * API ключ (v3 auth)\n * e55542ecb6aab3d889d16953eac82937\n * \n * Приклад API-запиту\n * https://api.themoviedb.org/3/movie/550?api_key=e55542ecb6aab3d889d16953eac82937\n * \n * Токен доступу для читання API (v4 auth)\neyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlNTU1NDJlY2I2YWFiM2Q4ODlkMTY5NTNlYWM4MjkzNyIsInN1YiI6IjYzY2NmY2QxOWE2NDM1MDBhZTAzODI3YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ZrJwlyhckYNnJMhcHP9AOOvED0EU5i-2cuiwVbINE00\n */\n\nconst API_KEY = 'e55542ecb6aab3d889d16953eac82937';\nconst URL = 'https://api.themoviedb.org/3';\nconst QUERY_TRENDING = '/trending/movie/week';\nconst QUERY_GENRE = '/genre/movie/list';\n\nexport async function fetchTrending(page) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_TRENDING}?api_key=${API_KEY}&page=${page}`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nasync function fetchGenre() {\n  try {\n    const responce = fetch(`${URL}${QUERY_GENRE}?api_key=${API_KEY}`);\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nlet genreList;\ngetGenreList();\nasync function getGenreList() {\n  const data = await fetchGenre();\n  genreList = data.genres;\n}\nexport function getGenreById(genre_ids) {\n  return genreList\n    .filter(genre => genre_ids.includes(genre.id))\n    .map(item => item.name)\n    .join(', ');\n}\n","import { getGenreById } from './themoviedb-api-service';\n\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/w500';\n\nexport async function markupTrending(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">             &nbsp;|&nbsp; ${parseInt(\n        release_date\n      )}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\nexport async function markupModalFilmInfo(targetFilm, modalFilmInfo) {\n  const {\n    title,\n    poster_path,\n    overview,\n    genre_ids,\n    id,\n    original_title,\n    popularity,\n    vote_count,\n    vote_average,\n  } = targetFilm;\n  const genreString = getGenreById(genre_ids);\n  const markup = `<div class=\"film-info\">\n         <img  src=\"${IMAGE_URL}${poster_path}\">\n         <div class=\"film-info-wrapper\">\n           <p>${title}</p>\n           <p>Vote ${vote_average}</p>\n           <p>Votes ${vote_count}</p>\n           <p>Popularity ${popularity}</p>\n           <p>Original Title ${original_title}</p>\n           <p>Genre ${genreString}</p>\n           <p>ABOUT</p>\n           <p>${overview}</p>\n           <p>id: ${id}</p>\n           <button type=\"button\">Add to watched</button>\n           <button type=\"button\">Add to queue</button>\n         </div>\n        </div>`;\n\n  modalFilmInfo.innerHTML = markup;\n}\n","import { fetchTrending } from './themoviedb-api-service';\nimport { markupTrending, markupModalFilmInfo } from './markup-service';\n\nconst page = 1;\nlet filmList;\n\nconst gallery = document.querySelector('.gallery');\ngallery.addEventListener('click', onCardClick);\n\nconst modalFilmInfo = document.querySelector('.modal-film-info');\n\nshowGallery();\n\nasync function showGallery() {\n  const data = await fetchTrending(page);\n  filmList = data.results;\n  markupTrending(filmList, gallery);\n}\n\nfunction onCardClick(event) {\n  const filmBox = event.target.closest('.film-box');\n  if (!filmBox) return;\n  const filmBoxId = Number(filmBox.dataset.id);\n  const targetFilm = filmList.find(film => film.id === filmBoxId);\n  markupModalFilmInfo(targetFilm, modalFilmInfo);\n}\n"],"names":["async","$dd75f990e59a30d4$export$366c886a9138e8db","page","responce","fetch","json","error","console","log","$dd75f990e59a30d4$var$genreList","$dd75f990e59a30d4$export$c19ed06c9403b25","genre_ids","filter","genre","includes","id","map","item","name","join","data","$dd75f990e59a30d4$var$fetchGenre","genres","$dd75f990e59a30d4$var$getGenreList","$00e5c4b3619c5131$export$e3073cde6ea8798e","filmList","gallery","markup","reduce","acc","poster_path","release_date","title","parseInt","innerHTML","$00e5c4b3619c5131$export$5a4ebf6bfd514978","targetFilm","modalFilmInfo","overview","original_title","popularity","vote_count","vote_average","$c848cac843f338cf$var$filmList","$c848cac843f338cf$var$gallery","document","querySelector","addEventListener","event","filmBox","target","closest","filmBoxId","Number","dataset","find","film","$c848cac843f338cf$var$modalFilmInfo","results","$c848cac843f338cf$var$showGallery"],"version":3,"file":"index.02ed21bc.js.map"}