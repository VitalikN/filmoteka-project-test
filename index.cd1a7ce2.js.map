{"mappings":"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","sources":["src/js/themoviedb-api-service.js","src/js/markup-service.js","src/js/filmoteka.js"],"sourcesContent":["/**\n * API ключ (v3 auth)\n * e55542ecb6aab3d889d16953eac82937\n * \n * Приклад API-запиту\n * https://api.themoviedb.org/3/movie/550?api_key=e55542ecb6aab3d889d16953eac82937\n * \n * Токен доступу для читання API (v4 auth)\neyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlNTU1NDJlY2I2YWFiM2Q4ODlkMTY5NTNlYWM4MjkzNyIsInN1YiI6IjYzY2NmY2QxOWE2NDM1MDBhZTAzODI3YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ZrJwlyhckYNnJMhcHP9AOOvED0EU5i-2cuiwVbINE00\n */\n\n// const API_KEY = '1174e437242bb46ea8831e578adaacd1'\nimport axios from 'axios';\n\nconst API_KEY = 'e55542ecb6aab3d889d16953eac82937';\nconst URL = 'https://api.themoviedb.org/3';\nconst QUERY_TRENDING = '/trending/movie/week';\nconst QUERY_GENRE = '/genre/movie/list';\nconst QUERY_SEARCH = '/search/movie';\n\nexport async function fetchSearch(search) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_SEARCH}?api_key=${API_KEY}&language=en-US&query=${search}&page=1&include_adult=false`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nexport async function fetchTrending(page) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_TRENDING}?api_key=${API_KEY}&page=${page}`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nasync function fetchGenre() {\n  try {\n    const responce = fetch(`${URL}${QUERY_GENRE}?api_key=${API_KEY}`);\n\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\ngetGenreBySearch();\nasync function getGenreBySearch() {\n  const data = await fetchSearch();\n\n  return data.results;\n}\n\nexport async function getGenreList() {\n  const data = await fetchGenre();\n  return data.genres;\n}\n","import { genreList } from './filmoteka';\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/w500';\n\nfunction getGenreById(genre_ids) {\n  const res = [];\n  for (const item of genre_ids) {\n    const genreObject = genreList.find(genre => genre.id === Number(item));\n\n    genreObject.name !== 'Science Fiction'\n      ? res.push(genreObject.name)\n      : res.push('Sci-Fi');\n  }\n  return res.length > 2 ? `${res[0]}, ${res[1]},  Other` : res.join(', ');\n}\n\nexport async function markupSearch(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\n//\n\nexport async function markupTrending(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\nexport async function markupModalFilmInfo(targetFilm, modalFilmInfo) {\n  const {\n    title,\n    poster_path,\n    overview,\n    genre_ids,\n    id,\n    original_title,\n    popularity,\n    vote_count,\n    vote_average,\n  } = targetFilm;\n  const genreString = getGenreById(genre_ids);\n  const markup = `<div class=\"film-info\">\n         <img  src=\"${IMAGE_URL}${poster_path}\">\n         <div class=\"film-info-wrapper\">\n           <p>${title || original_title}</p>\n           <p>Vote ${vote_average}</p>\n           <p>Votes ${vote_count}</p>\n           <p>Popularity ${popularity}</p>\n           <p>Original Title ${original_title}</p>\n           <p>Genre ${genreString}</p>\n           <p>ABOUT</p>\n           <p>${overview}</p>\n           <p>id: ${id}</p>\n           <button type=\"button\">Add to watched</button>\n           <button type=\"button\">Add to queue</button>\n         </div>\n        </div>`;\n\n  modalFilmInfo.innerHTML = markup;\n}\n","import {\n  fetchTrending,\n  fetchSearch,\n  getGenreList,\n} from './themoviedb-api-service';\nimport {\n  markupSearch,\n  markupTrending,\n  markupModalFilmInfo,\n} from './markup-service';\n\nconst page = 1;\nlet filmList;\nlet genreList;\n\nconst formEl = document.querySelector('.form');\nconst formText = document.querySelector('.form__text');\nconst gallery = document.querySelector('.gallery');\ngallery.addEventListener('click', onCardClick);\nformEl.addEventListener('submit', showGallerySearchQuery);\n\nconst modalFilmInfo = document.querySelector('.modal-film-info');\n\ninitGallery();\nexport { genreList };\n\nasync function initGallery() {\n  genreList = await getGenreList();\n  await showGallery();\n}\n\nasync function showGallery() {\n  const data = await fetchTrending(page);\n  filmList = data.results;\n  markupTrending(filmList, gallery);\n}\n\nfunction onCardClick(event) {\n  const filmBox = event.target.closest('.film-box');\n  if (!filmBox) return;\n  const filmBoxId = Number(filmBox.dataset.id);\n  const targetFilm = filmList.find(film => film.id === filmBoxId);\n  markupModalFilmInfo(targetFilm, modalFilmInfo);\n}\n\nasync function showGallerySearchQuery(evt) {\n  evt.preventDefault();\n  console.log(evt.target.searchQuery.value.trim());\n  const search = evt.target.searchQuery.value.trim().toLowerCase();\n  const data = await fetchSearch(search);\n  const searchQuery = data.results;\n\n  markupSearch(searchQuery, gallery);\n  if (!data.total_results) {\n    showGallery();\n    console.log(data.total_results);\n    formText.classList.remove('hidden');\n    return;\n  } else {\n    formText.classList.add('hidden');\n  }\n}\n"],"names":["async","$dd75f990e59a30d4$export$6f539dc45dead1c","search","responce","fetch","json","error","console","log","$dd75f990e59a30d4$export$366c886a9138e8db","page","$dd75f990e59a30d4$export$321e906c11f8df73","$dd75f990e59a30d4$var$fetchGenre","genres","results","$dd75f990e59a30d4$var$getGenreBySearch","$00e5c4b3619c5131$var$getGenreById","genre_ids","res","item","genreObject","$c848cac843f338cf$export$a60e10dab2b13b4f","find","genre","id","Number","name","push","length","join","$00e5c4b3619c5131$export$556e8fc4b06516e3","filmList","gallery","markup","reduce","acc","poster_path","release_date","title","parseInt","innerHTML","$00e5c4b3619c5131$export$e3073cde6ea8798e","$00e5c4b3619c5131$export$5a4ebf6bfd514978","targetFilm","modalFilmInfo","overview","original_title","popularity","vote_count","vote_average","$c848cac843f338cf$var$filmList","$c848cac843f338cf$var$formEl","document","querySelector","$c848cac843f338cf$var$formText","$c848cac843f338cf$var$gallery","addEventListener","event","filmBox","target","closest","filmBoxId","dataset","film","$c848cac843f338cf$var$modalFilmInfo","evt","preventDefault","searchQuery","value","trim","toLowerCase","data","total_results","$c848cac843f338cf$var$showGallery","classList","remove","add","$c848cac843f338cf$var$initGallery"],"version":3,"file":"index.cd1a7ce2.js.map"}