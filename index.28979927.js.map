{"mappings":"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","sources":["src/js/themoviedb-api-service.js","src/js/markup-service.js","src/js/filmoteka.js"],"sourcesContent":["/**\n * API ключ (v3 auth)\n * e55542ecb6aab3d889d16953eac82937\n * \n * Приклад API-запиту\n * https://api.themoviedb.org/3/movie/550?api_key=e55542ecb6aab3d889d16953eac82937\n * \n * Токен доступу для читання API (v4 auth)\neyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlNTU1NDJlY2I2YWFiM2Q4ODlkMTY5NTNlYWM4MjkzNyIsInN1YiI6IjYzY2NmY2QxOWE2NDM1MDBhZTAzODI3YiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.ZrJwlyhckYNnJMhcHP9AOOvED0EU5i-2cuiwVbINE00\n */\n\n// const API_KEY = '1174e437242bb46ea8831e578adaacd1'\nconst API_KEY = 'e55542ecb6aab3d889d16953eac82937';\nconst URL = 'https://api.themoviedb.org/3';\nconst QUERY_TRENDING = '/trending/movie/week';\nconst QUERY_GENRE = '/genre/movie/list';\nconst QUERY_SEARCH = '/search/movie';\n\nexport async function fetchSearch(search) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_SEARCH}?api_key=${API_KEY}&language=en-US&query=${search}&page=1&include_adult=false`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nexport async function fetchTrending(page) {\n  try {\n    const responce = fetch(\n      `${URL}${QUERY_TRENDING}?api_key=${API_KEY}&page=${page}`\n    );\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\nasync function fetchGenre() {\n  try {\n    const responce = fetch(`${URL}${QUERY_GENRE}?api_key=${API_KEY}`);\n\n    return (await responce).json();\n  } catch (error) {\n    return console.log('error :>> ', error);\n  }\n}\n\ngetGenreBySearch();\nasync function getGenreBySearch() {\n  const data = await fetchSearch();\n\n  return data.results;\n}\n\nlet genreList;\ngetGenreList();\nasync function getGenreList() {\n  const data = await fetchGenre();\n  genreList = data.genres;\n}\nexport function getGenreById(genre_ids) {\n  const res = [];\n  for (const item of genre_ids) {\n    const genreObject = genreList.find(genre => genre.id === Number(item));\n\n    genreObject.name !== 'Science Fiction'\n      ? res.push(genreObject.name)\n      : res.push('Sci-Fi');\n  }\n  return res.length > 2 ? `${res[0]}, ${res[1]},  Other` : res.join(', ');\n}\n","import { getGenreById } from './themoviedb-api-service';\n\nconst IMAGE_URL = 'https://image.tmdb.org/t/p/w500';\n\n//\nexport async function markupSearch(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\n//\n\nexport async function markupTrending(filmList, gallery) {\n  const markup = filmList.reduce(\n    (acc, { poster_path, release_date, genre_ids, id, title }) => {\n      const genreString = getGenreById(genre_ids);\n\n      return (acc += `<div class=\"film-box\" data-id=\"${id}\">\n      <img class=\"filmoteka__img\" src=\"${IMAGE_URL}${poster_path}\"  alt=\"${title}\">\n      <p class=\"filmoteka__title\"> ${title}</p>\n<div  class=\"filmoteka__box\">\n      <p class=\"filmoteka__text\"> ${genreString}</p>\n      <p class=\"filmoteka__text\">&nbsp;|&nbsp; ${parseInt(release_date)}</p>\n      </div>\n      </div>`);\n    },\n    ``\n  );\n  gallery.innerHTML = markup;\n}\n\nexport async function markupModalFilmInfo(targetFilm, modalFilmInfo) {\n  const {\n    title,\n    poster_path,\n    overview,\n    genre_ids,\n    id,\n    original_title,\n    popularity,\n    vote_count,\n    vote_average,\n  } = targetFilm;\n  const genreString = getGenreById(genre_ids);\n  const markup = `<div class=\"film-info\">\n         <img  src=\"${IMAGE_URL}${poster_path}\">\n         <div class=\"film-info-wrapper\">\n           <p>${title}</p>\n           <p>Vote ${vote_average}</p>\n           <p>Votes ${vote_count}</p>\n           <p>Popularity ${popularity}</p>\n           <p>Original Title ${original_title}</p>\n           <p>Genre ${genreString}</p>\n           <p>ABOUT</p>\n           <p>${overview}</p>\n           <p>id: ${id}</p>\n           <button type=\"button\">Add to watched</button>\n           <button type=\"button\">Add to queue</button>\n         </div>\n        </div>`;\n\n  modalFilmInfo.innerHTML = markup;\n}\n","import { fetchTrending, fetchSearch } from './themoviedb-api-service';\nimport {\n  markupSearch,\n  markupTrending,\n  markupModalFilmInfo,\n} from './markup-service';\n\nconst page = 1;\nlet filmList;\n\nconst formEl = document.querySelector('.form');\nconst formText = document.querySelector('.form__text');\nconst gallery = document.querySelector('.gallery');\ngallery.addEventListener('click', onCardClick);\nformEl.addEventListener('submit', showGallerySearchQuery);\n\nconst modalFilmInfo = document.querySelector('.modal-film-info');\n\nshowGallery();\n\nasync function showGallery() {\n  const data = await fetchTrending(page);\n  filmList = data.results;\n  markupTrending(filmList, gallery);\n}\n\nfunction onCardClick(event) {\n  const filmBox = event.target.closest('.film-box');\n  if (!filmBox) return;\n  const filmBoxId = Number(filmBox.dataset.id);\n  const targetFilm = filmList.find(film => film.id === filmBoxId);\n  markupModalFilmInfo(targetFilm, modalFilmInfo);\n}\n\nasync function showGallerySearchQuery(evt) {\n  evt.preventDefault();\n  console.log(evt.target.searchQuery.value.trim());\n  const search = evt.target.searchQuery.value.trim();\n  const data = await fetchSearch(search);\n  const searchQuery = data.results;\n\n  formText.classList.add('hidden');\n  markupSearch(searchQuery, gallery);\n  if (!data.total_results) {\n    console.log(data.total_results);\n    formText.classList.remove('hidden');\n  }\n}\n"],"names":["async","$dd75f990e59a30d4$export$6f539dc45dead1c","search","responce","fetch","json","error","console","log","$dd75f990e59a30d4$export$366c886a9138e8db","page","$dd75f990e59a30d4$var$genreList","$dd75f990e59a30d4$export$c19ed06c9403b25","genre_ids","res","item","genreObject","find","genre","id","Number","name","push","length","join","results","$dd75f990e59a30d4$var$getGenreBySearch","data","$dd75f990e59a30d4$var$fetchGenre","genres","$dd75f990e59a30d4$var$getGenreList","$00e5c4b3619c5131$export$556e8fc4b06516e3","filmList","gallery","markup","reduce","acc","poster_path","release_date","title","parseInt","innerHTML","$00e5c4b3619c5131$export$e3073cde6ea8798e","$00e5c4b3619c5131$export$5a4ebf6bfd514978","targetFilm","modalFilmInfo","overview","original_title","popularity","vote_count","vote_average","$c848cac843f338cf$var$filmList","$c848cac843f338cf$var$formEl","document","querySelector","$c848cac843f338cf$var$formText","$c848cac843f338cf$var$gallery","addEventListener","event","filmBox","target","closest","filmBoxId","dataset","film","$c848cac843f338cf$var$modalFilmInfo","evt","preventDefault","searchQuery","value","trim","classList","add","total_results","remove","$c848cac843f338cf$var$showGallery"],"version":3,"file":"index.28979927.js.map"}